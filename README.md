# KOKODIGAME API

Микросервисная система для многопользовательской карточной игры с различными эффектами карт.

## Архитектура

## Системные компоненты

### Бизнес-микросервисы:
- **Auth Service** - управление пользователями и аутентификацией
- **Game Service** - игровая логика и сессии

### Инфраструктурные сервисы:
- **Config Server** - централизованное хранение конфигураций
- **Eureka Server** - сервис обнаружения и регистрации микросервисов

Сервисы зарегистрированы в **Eureka Server** и используют:
- Централизованную конфигурацию
- Service discovery через Eureka
- Feign клиенты для межсервисного взаимодействия

## API Endpoints

### Auth Service (`/api/auth`)

| Метод | Эндпоинт | Описание |
|-------|----------|----------|
| POST | `/register` | Регистрация нового пользователя |
| POST | `/login` | Аутентификация пользователя |
| GET | `/users/{userId}` | Получение информации о пользователе |

### Game Service (`/api/games`)

| Метод | Эндпоинт | Описание |
|-------|----------|----------|
| POST | `/` | Создание новой игровой сессии |
| POST | `/{gameId}/join` | Присоединение к игровой сессии |
| POST | `/{gameId}/start` | Начало игры |
| GET | `/{gameId}` | Получение статуса игры |
| POST | `/{gameId}/turns` | Совершение хода |

## Игровой процесс

1. **Создание игры**
    - Создается новая сессия в состоянии `WAITING`
    - Минимальное количество игроков: 2
    - Максимальное количество игроков: 4

2. **Присоединение игроков**
    - Игроки присоединяются к сессии
    - При достижении минимального количества игроков можно начать игру

3. **Старт игры**
    - Генерируется колода карт
    - Статус меняется на `IN_PROGRESS`
    - Определяется порядок ходов

4. **Ход игрока**
    - Проверяется очередь хода
    - Игрок берет карту из колоды
    - Применяется эффект карты:
        - `Points`: добавляет очки
        - `Block`: блокирует следующего игрока
        - `Steal`: крадет очки у другого игрока
        - `DoubleDown`: удваивает очки
    - Ход записывается в историю
    - Проверяется условие победы

5. **Завершение игры**
    - При достижении 30+ очков
    - Статус меняется на `FINISHED`

### Порядок запуска

  - DiscoveryServer
  - ConfigServer

далее в любом порядке (после паузы)

   - GameService
   - AuthService
